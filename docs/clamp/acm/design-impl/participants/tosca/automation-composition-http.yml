name: PMSHInstance0
version: 1.0.1
compositionId: {{compositionId}}
description: Automation composition instance for PMSH microservice
elements:

  ecc175fa-cefa-11ed-afa1-0242ac120002:
    id: ecc175fa-cefa-11ed-afa1-0242ac120002
    definition:
      name: org.onap.domain.database.Http_PMSHMicroserviceAutomationCompositionElement
      version: 1.2.3
    description: Automation composition element for the http requests of PMSH microservice
    properties:
      baseUrl: http://consul-server-ui:8500
      httpHeaders:
        Content-Type: application/json
      configurationEntities:
        - configurationEntityId:
            name: entity1
            version: 1.0.1
          restSequence:
            - restRequestId:
                name: request1
                version: 1.0.1
              httpMethod: PUT
              path: v1/kv/dcae-pmsh2
              body: '{
      "control_loop_name":"pmsh-control-loop",
      "operational_policy_name":"pmsh-operational-policy",
      "aaf_password":"demo123456!",
      "aaf_identity":"dcae@dcae.onap.org",
      "cert_path":"/opt/app/pmsh/etc/certs/cert.pem",
      "key_path":"/opt/app/pmsh/etc/certs/key.pem",
      "ca_cert_path":"/opt/app/pmsh/etc/certs/cacert.pem",
      "enable_tls":"true",
      "pmsh_policy":{
         "subscription":{
            "subscriptionName":"ExtraPM-All-gNB-R2B",
            "administrativeState":"UNLOCKED",
            "fileBasedGP":15,
            "fileLocation":"\/pm\/pm.xml",
            "nfFilter":{
               "nfNames":[
                  "^pnf.*",
                  "^vnf.*"
               ],
               "modelInvariantIDs":[
               ],
               "modelVersionIDs":[
               ],
               "modelNames":[
               ]
            },
            "measurementGroups":[
               {
                  "measurementGroup":{
                     "measurementTypes":[
                        {
                           "measurementType":"countera"
                        },
                        {
                           "measurementType":"counterb"
                        }
                     ],
                     "managedObjectDNsBasic":[
                        {
                           "DN":"dna"
                        },
                        {
                           "DN":"dnb"
                        }
                     ]
                  }
               },
               {
                  "measurementGroup":{
                     "measurementTypes":[
                        {
                           "measurementType":"counterc"
                        },
                        {
                           "measurementType":"counterd"
                        }
                     ],
                     "managedObjectDNsBasic":[
                        {
                           "DN":"dnc"
                        },
                        {
                           "DN":"dnd"
                        }
                     ]
                  }
               }
            ]
         }
      },
      "streams_subscribes":{
         "aai_subscriber":{
            "type":"message_router",
            "dmaap_info":{
               "topic_url":"https://10.152.183.151:3905/events/AAI_EVENT",
               "client_role":"org.onap.dcae.aaiSub",
               "location":"san-francisco",
               "client_id":"1575976809466"
            }
         },
         "policy_pm_subscriber":{
            "type":"message_router",
            "dmaap_info":{
               "topic_url":"https://10.152.183.151:3905/events/org.onap.dmaap.mr.PM_SUBSCRIPTIONS",
               "client_role":"org.onap.dcae.pmSubscriber",
               "location":"san-francisco",
               "client_id":"1575876809456"
            }
         }
      },
      "streams_publishes":{
         "policy_pm_publisher":{
            "type":"message_router",
            "dmaap_info":{
               "topic_url":"https://10.152.183.151:3905/events/org.onap.dmaap.mr.PM_SUBSCRIPTIONS",
               "client_role":"org.onap.dcae.pmPublisher",
               "location":"san-francisco",
               "client_id":"1475976809466"
            }
         },
         "other_publisher":{
            "type":"message_router",
            "dmaap_info":{
               "topic_url":"https://10.152.183.151:3905/events/org.onap.dmaap.mr.SOME_OTHER_TOPIC",
               "client_role":"org.onap.dcae.pmControlPub",
               "location":"san-francisco",
               "client_id":"1875976809466"
            }
         }
      }
   }'
              expectedResponse: 200
